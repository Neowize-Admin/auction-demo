/* eslint-disable */
/**
 * Radial LiveChat Core
 * @version 1.4.7
 * @author Justin Szczurowski <szczurowskij@radial.com>
 */
(function(a){var d=arguments.callee;if(!window.liveChatSettings)throw Error("Couldn't find LiveChat settings. Please make sure livechat-config.js is loaded before livechat.js");if(!window.liveChatClientSettings)throw Error("Couldn't find LiveChat Client settings. Please make sure livechat-config-client.js is loaded before livechat.js");if(!window.jQuery){if(!liveChatClientSettings.jQuery)throw Error("jQuery is not loaded, and liveChatClientSettings.jQuery is not defined. Please set liveChatClientSettings.jQuery to a relative or absolute URL which points to the jQuery file you wish to load.");
if(!d.jQueryLoading){var f=document.createElement("script");f.type="text/javascript";f.src=liveChatClientSettings.jQuery;document.getElementsByTagName("head")[0].appendChild(f);d.jQueryLoading=!0}return setTimeout(d,10)}d.jQueryLoading&&(a=jQuery.noConflict(),d.jQueryLoading=!1);a.fn.scrollTo=function(c,b,g){b||(b=600);"function"!==typeof g&&(g=function(){});a(this).stop().animate({scrollTop:c},b,g)};a.fn.animateOnce=function(c,b,g){c+=" animated";var h=a(this);h.data("animate-once")&&h.off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend").removeClass(h.data("animate-once")).stop();
h.data("animate-once",c);"function"===typeof b&&(g=b,b=!1);!b||"number"!==typeof b&&/[0-9.]+m?s/i.test(b)||(b+="s");var d=h.css("animation-duration");"0s"===d&&(d="");h.show();b&&h.css({animationDuration:b});h.addClass(c).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(a){h.removeClass(c).off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend");h.data("animate-once",!1);b&&h.css({animationDuration:d});"function"===typeof g&&g.call(this)});
return h};var q=a(window),k=a(document),m=a("body"),p=a("head"),n=0!==a(".livechat-prechat").length?"pre-chat":-1!==document.location.href.indexOf(liveChatSettings.chatUrl)?"in-chat":"client",l=navigator.userAgent,f=/iPad|iPhone|iPod/i.test(l)&&!window.MSStream,d=/iPhone|iPod|(?=.*\bAndroid\b)(?=.*\bMobile\b)|(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)|IEMobile|BB10|NokiaN9/i.test(l),l=!d&&/iPad|Android|\bTablet\b|\b(KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b|(?=.*\bWindows\b)(?=.*\bARM\b)/i.test(l);
if("pre-chat"===n||"in-chat"===n)0===p.find("meta[name=viewport]").length&&p.append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />'),liveChatClientSettings.favIcon&&p.append('<link rel="icon" type="'+liveChatClientSettings.favIcon.type+'" href="'+liveChatClientSettings.favIcon.url+'">'),d&&m.addClass("is-mobile"),l&&m.addClass("is-tablet"),k.on("click",".livechat-close-btn",function(){window.close()});if("in-chat"===n){var r=function(){var c=
q.height(),b=c-a(".livechat-client-input").outerHeight(!0)-a(".liveAgentChatWaiting").outerHeight(!0)-5,g=a(".livechat-inchat-container").css("max-height"),d=a("#liveAgentClientChat").find(".row"),e=a("#liveAgentChatLog"),g=g&&"none"!==g?parseFloat(g):c;d.each(function(){var c=a(this);c.hasClass("liveAgentChatWrap")||(b-=c.outerHeight(!0))});e.css({height:Math.min(b,g)})},d=liveChatClientSettings.inChat,e=d.messages;liveChatClientSettings.title&&(document.title=liveChatClientSettings.title);f&&a(".liveAgentSaveButton").hide();
m.addClass("livechat-inchat");a(".liveAgentSendButton").addClass("livechat-send-btn btn");a(".livechat-text").html(d.headline||"");a("#liveAgentChatInput").attr("autocomplete","off");d.loadingText&&a(".livechat-loading-text").html(d.loadingText);d.subText?a(".livechat-subtext").html(d.subText):a(".livechat-subtext").hide();q.on("resize",r);liveagent.addEventListener(liveagent.chasitor.Events.CHAT_ESTABLISHED,function(){r();a(".livechat-loading-modal").hide();window.focus()});liveagent.addEventListener(liveagent.chasitor.Events.CHAT_REQUEST_FAILED,
function(){var c=a("#liveAgentMessageContainer"),b=c.find(".btn-primary");if(0===b.length)return setTimeout(arguments.callee,100);a(".livechat-loading-text").html(c.find("div > p").html());a(".livechat-loading-image").hide();b.on("click",function(){window.close()})});d=function(){a(".livechat-inchat-buttons").append('<div class="livechat-close-btn"></div>');"function"===typeof liveChatSettings.endChat.callback&&liveChatSettings.endChat.callback();"function"===typeof liveChatClientSettings.endChat.callback&&
liveChatClientSettings.endChat.callback()};liveagent.addEventListener(liveagent.chasitor.Events.AGENT_CHAT_ENDED,d);liveagent.addEventListener(liveagent.chasitor.Events.CHASITOR_CHAT_ENDED,d);if(e.animate||e.customClasses||e.callback)liveagent.addEventListener(liveagent.chasitor.Events.AGENT_CHAT_MESSAGE,function(){var c=a(".operator").not("[id]").last();e.customClasses&&c.addClass(e.customClasses);e.animate&&c.animateOnce(e.animationClass,e.animationTime);"function"===typeof e.callback&&e.callback.apply(this,
arguments)}),liveagent.addEventListener(liveagent.chasitor.Events.CHASITOR_CHAT_MESSAGE,function(){var c=a(".client").not("[id]").last();e.customClasses&&c.addClass(e.customClasses);e.animate&&c.animateOnce(e.animationClass,e.animationTime);"function"===typeof e.callback&&e.callback.apply(this,arguments)});(function(){var c=liveagent.chasitor.Events,b,d=function(){var b=a("#liveAgentMessageContainer button");0!==b.length&&b.addClass("btn btn-primary")};for(b in c)liveagent.addEventListener(c[b],d)})();
liveChatSettings.inChat&&"function"===typeof liveChatSettings.inChat.callback&&liveChatSettings.inChat.callback();liveChatClientSettings.inChat&&"function"===typeof liveChatClientSettings.inChat.callback&&liveChatClientSettings.inChat.callback();a(function(){setTimeout(function(){window.scrollTo(0,1)},0)})}else if("pre-chat"===n)liveChatClientSettings.title&&(document.title=liveChatClientSettings.title),f=a("#livechat-prechat-form"),(k=a("#livechat-session-id").val()||!1)&&!/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/i.test(k)&&
(k=!1),f.attr("action",liveChatSettings.chatUrl+"?language=#deployment_id="+liveChatSettings.deploymentId+"&org_id="+liveChatSettings.orgId+"&button_id="+liveChatSettings.buttonId+(k?"&session_id="+k:"")),f.append('<input type="hidden" name="liveagent.prechat:BrandCode" value="'+liveChatSettings.brandCode+'" />'),f.append('<input type="hidden" name="liveagent.prechat:Chat_Initiated_By" value="'+(l?"tablet":d?"mobile":"desktop")+'" />'),f.append('<input type="hidden" name="liveagent.prechat.findorcreate.map:Case" value="Chat_Initiated_By__c,Chat_Initiated_By" />'),
f.append('<input type="hidden" name="liveagent.prechat.findorcreate.map.doCreate:Case" value="Chat_Initiated_By__c,true" />'),a(".livechat-text").html(liveChatClientSettings.preChat.headline||""),liveChatClientSettings.preChat.subText?a(".livechat-subtext").html(liveChatClientSettings.preChat.subText):a(".livechat-subtext").hide(),a("#is-existing-case").on("change",function(c){var b=a(this);c=a(".existing-case-field");b=(b=b.closest("form").data("validator"))?b.settings:!1;a(this).is(":checked")?
(c.removeClass("hidden"),a("#case-number").select(),m.scrollTo(m.prop("scrollHeight"))):(c.addClass("hidden"),b&&(c.find(b.errorElement+"."+b.errorClass.split(" ")[0]+", .form-errors").hide(),c.find("."+b.errorClass).removeClass(b.errorClass)))}),a.validator&&(a.validator.addMethod("email",function(a,b){return this.optional(b)||/^[a-z0-9._%'+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i.test(a)},a.validator.messages.email),a.validator.messages.casenumber="Please enter a valid order number.",a.validator.addMethod("casenumber",
function(c,b){return a("#is-existing-case").is(":checked")&&0!==c.length&&/^[0-9a-z]{1,30}$/i.test(c)},a.validator.messages.casenumber)),liveChatSettings.preChat&&"function"===typeof liveChatSettings.preChat.callback&&liveChatSettings.preChat.callback(),liveChatClientSettings.preChat&&"function"===typeof liveChatClientSettings.preChat.callback&&liveChatClientSettings.preChat.callback(),a(function(){setTimeout(function(){window.scrollTo(0,1)},0);a.validator&&a(".form-validation").validate({errorClass:"livechat-field-error",
errorElement:"div",showErrors:function(c,b){var d=this;if(0===b.length)a(d.settings.errorElement+"."+d.settings.errorClass.split(" ")[0]+", .form-errors").each(function(){a(this).data("animated",!1).hide()}),d.currentElements.removeClass(d.settings.errorClass);else{var e=liveChatClientSettings.validation.errors,f=e.animate,k=e.callback,l=e.customClasses;a.each(b,function(){d.defaultShowErrors();var b=this.method?d.toShow:a(this.element.nextSibling);b.prepend('<span class="livechat-icon-error"></span>');
f&&!b.data("animated")&&(b.data("animated",!0),b.animateOnce(liveChatClientSettings.validation.errors.animationClass,liveChatClientSettings.validation.errors.animationTime));l&&b.addClass(l)});"function"===typeof k&&k.call(this,b)}}})});else{var t=function(){var c=liveChatSettings.buttonId;liveagent.init(liveChatSettings.initUrl,liveChatSettings.deploymentId,liveChatSettings.orgId);liveagent.setChatWindowWidth(liveChatClientSettings.windowWidth);liveagent.setChatWindowHeight(liveChatClientSettings.windowHeight);
window._laq||(window._laq=[]);window._laq.push(function(){var b=a(".livechat-online"),d=a(".livechat-offline");b.each(function(){a(this).on("click",function(a){a.preventDefault();liveagent.startChat(c)});liveagent.showWhenOnline(c,this)});d.each(function(){liveagent.showWhenOffline(c,this)})})};a.getScript(liveChatSettings.deploymentScript).done(function(){t()}).fail(function(){throw Error("Failed to load SalesForce deployment script!");})}})(window.jQuery);
